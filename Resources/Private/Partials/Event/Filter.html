<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers"
    xmlns:rkw="http://typo3.org/ns/RKW/RkwEvents/ViewHelpers"
    data-namespace-typo3-fluid="true">

    <f:if condition="{settings.noFilters}">
        <f:else>

            <f:form
                noCacheHash="true"
                action="list"
                controller="Event"
                extensionName="RkwEvents"
                pluginName="Pi1"
                class="ajax"
                name="filter"
                additionalParams="{rkw_ajax : '{key: ajaxHelper.key, cid: ajaxHelper.contentUid, idl: \'1\'}'}"
            >
                <div class="btn-list mb-2">

                    <f:comment><!-- DEPARTMENT --></f:comment>
                    <f:if condition="{departmentList} && {settings.list.filter.showDepartment}">
                        <f:form.select
                            class="ajax select-field select-field--longer"
                            id="department-select"
                            name="filter[department]"
                            value="{filter.department}"
                            options="{departmentList}"
                            optionValueField="uid"
                            optionLabelField="name"
                            prependOptionLabel="<f:translate key='tx_rkwevents_fluid.partials_event_filter.labelTopics' />"
                            prependOptionValue="0"
                        />
                    </f:if>


                    <f:comment><!-- DOCUMENT TYPE --></f:comment>
                    <f:if condition="{documentTypeList} && {settings.list.filter.showDocumentType}">
                        <f:form.select
                            class="ajax select-field select-field--longer"
                            id="document-type-select"
                            name="filter[documentType]"
                            value="{filter.documentType}"
                            options="{documentTypeList}"
                            optionValueField="uid"
                            optionLabelField="name"
                            prependOptionLabel="<f:translate key='tx_rkwevents_fluid.partials_event_filter.labelDocumentType' />"
                            prependOptionValue="0"
                        />
                    </f:if>


                    <f:comment><!-- CATEGORY --></f:comment>
                    <f:if condition="{categoryList} && {settings.list.filter.showCategory}">
                        <f:form.select
                            class="ajax select-field select-field--longer"
                            id="category-select"
                            name="filter[category]"
                            value="{filter.category}"
                            options="{categoryList}"
                            optionValueField="uid"
                            optionLabelField="title"
                            prependOptionLabel="<f:translate key='tx_rkwevents_fluid.partials_event_filter.labelCategory' />"
                            prependOptionValue="0"
                        />
                    </f:if>


                    <f:comment><!-- TIME --></f:comment>
                    <f:if condition="{timeArrayList} && {settings.list.filter.showTime}">
                        <f:form.select
                            class="ajax select-field select-field--longer"
                            id="time-select"
                            name="filter[time]"
                            value="{filter.time}"
                            options="{timeArrayList}"
                            optionValueField="uid"
                            optionLabelField="title"
                            prependOptionLabel="<f:translate key='tx_rkwevents_fluid.partials_event_filter.labelMonth' />"
                            prependOptionValue="0"
                        />
                    </f:if>

                    <f:comment><!-- ADDRESS -->
                        <f:if condition="{settings.list.filter.showAddress}">
                            <div class="search-field search-field--small">

                                <f:form.textfield
                                    class="single"
                                    name="filter[address]"
                                    value="{filter.address}"
                                    type="text"
                                    placeholder="<f:translate key='tx_rkwevents_fluid.partials_event_filter.placeholderZipSearch' extensionName='rkwEvents' />"
                                />

                                <button type="submit" class="btn btn--secondary search-field__submit"
                                    title="<f:translate key='tx_rkwevents_fluid.partials_event_filter.labelSearch' extensionName='rkwEvents' />">
                                    <svg class="icon icon--16">
                                    <use xlink:href="#ic-arrow-primary" /></svg>
                                </button>
                            </div>
                        </f:if>
                    </f:comment>

                </div>

                <f:comment>
                    <!-- @toDo: DEPRECATED (only needed for OLD Ajax API) -->
                    <!-- Override typeNum for AJAX -->
                    <input type="hidden" name="type" value="{ajaxTypeNum}">
                </f:comment>

                <!-- Project filter from Plugin -->
                <f:form.hidden name="filter[project]" value="{filter.project}" />
                <f:form.hidden name="filter[noGrouping]" value="{filter.noGrouping}" />

            </f:form>
        </f:else>
    </f:if>

</html>